# Jenkins PVC - 持久卷声明

---
# Jenkins Home 数据卷 - 存储配置、插件、任务等
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: jenkins-home-pvc
  namespace: jenkins
  labels:
    app.kubernetes.io/name: jenkins
    app.kubernetes.io/component: storage
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 50Gi  # Jenkins 需要较大空间存储插件、构建历史等
  # storageClassName: standard  # 根据集群配置选择合适的 StorageClass
  # 生产环境建议使用 SSD 存储类
  # storageClassName: fast-ssd

---
# Maven 仓库缓存卷 - 加速 Maven 构建
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: maven-repo-pvc
  namespace: jenkins
  labels:
    app.kubernetes.io/name: jenkins
    app.kubernetes.io/component: build-cache
spec:
  accessModes:
    - ReadWriteMany  # 多个 Agent 共享
  resources:
    requests:
      storage: 20Gi
  # storageClassName: nfs  # 需要支持 ReadWriteMany 的存储类

---
# NPM 缓存卷 - 加速 Node.js 构建（可选）
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: npm-cache-pvc
  namespace: jenkins
  labels:
    app.kubernetes.io/name: jenkins
    app.kubernetes.io/component: build-cache
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 10Gi
  # storageClassName: nfs

